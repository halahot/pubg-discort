# Соглашение по разработке

## Система контроля версий Git

Процесс: GitFlow с возможностью отдачи в продуктивную среду коммитов с нескольких релизных веток.

### Ветки

Для талонов Story, Feature, Improvement необходимо заводить ветки с префиком `feature/`, например `feature/GDES-1234-goodThing`
Предпочтительная стратегия синхронизации локальных веток с удалёнными - `rebase`. Это можно задать в конфигурации локальной копии репозитория командой `git config --bool pull.rebase true` (выполнять в папке репозитория)

### Сообщения в ревизиях (Conventional commits)

При коммитах необходимо использовать следующий формат сообщений:

```text
<type>(<scope>): <subject>
<BLANK LINE>
<body>
<BLANK LINE>
<footer>
```

Для автоматизации удобно использовать плагин для [WebStorm](https://plugins.jetbrains.com/plugin/9861-git-commit-template) и [VS Code](https://marketplace.visualstudio.com/items?itemName=KnisterPeter.vscode-commitizen)

#### type - тип изменений

* feat - реализация feature или improvement
* fix - исправление дефекта (бага)
* docs - документирование кода/проекта
* style - изменение стилей
* refactor - рефакторинг (изменение кода, не добавляющее новых фич и не исправляющее баги)
* test - изменение в тестах
* chore - изменение процесса сборки вспомогательных частей проекта
* ci - настройки Continous Integration
* build - изменение процесса сборки проекта
* perf - улучшение производительности

#### scope - область изменений

* doctor - унаследованный код КПИ.Врача
* operator - код, реализующий функциональность КПИ.Оператор.СЭМД
* backend - код серверной части приложения (адаптер)
* database - миграции БД продукта
* e2e - код end-to-end тестов
* tools - код инструментов, используемых для обслуживания и реализации продукта
* xslt - визуализации

Новые скоупы добавлять при появлении в них необходимости.

#### subject - смысл изменений (императив)

пример: "добавить валидацию в компонент DaysPicker"

#### body - опциональное детальное описание изменений

Можно копировать заголовок задачи JIRA, либо раскрывать детали изменений

#### footer - номера закрытых задач в JIRA

* Более одной задачи указывать через запятую.
* Если задача - сабтаск, то главную задачу не указывать.
* По умолчанию перед номером талона писать Closes. Если задача не решена в этой ревизии - писать Progress.

### Автоматизация

Установить глобально `commitizen`

```
npm install -g commitizen
```

Выбрать файлы для коммита (в GUI или с помощью команды `git add`)

Выполнить команду `git cz` и следовать дальнейшим инструкциям

> Чтобы работало, коммитить необходимо из папки `Frontend`
